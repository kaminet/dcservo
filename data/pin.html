<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<a href="admin.html"  class="btn btn--s">&lt;</a>&nbsp;&nbsp;<strong>Servo Positions Config</strong>
	<hr>
	<form action="" method="post">
		<table border="0"  cellspacing="0" cellpadding="3" >
			<tr>
				<td align="right">Enable</td>
				<td>
			</tr>
			<tr>
				<td align="right">ARM1</td>
				<td>
				<label><input id="A1" type="range" min="0" max="1023" step="1" oninput="setVal(this)"></label>
			</tr>
			<tr>
				<td align="right">ARM2</td>
				<td>
				<label><input id="A2" type="range" min="0" max="1023" step="1" oninput="setVal(this)"></label>
			</tr>
		<tr>
        <td align="right"><input type="text" id="D1V" name="D1V" size="3">D1</td>
				<td colspan="2" align="center">
				<input id="D1" type="button" style="width:180px" class="btn btn--m btn--red" value="OFF" onclick="handleToggleButton(this)"></td>
			</tr>
			 <tr>
        <td align="right"><input type="text" id="D2V" name="D2V" size="3">D2</td>
				<td colspan="2" align="center">
				<input id="D2" type="button" style="width:180px" class="btn btn--m btn--red" value="OFF" onclick="handleToggleButton(this)"></td>
			</tr>
		</table>
	</form>
	<script>
	function setVal(el) {
		if(!el.lastVal) {
			el.lastVal = el.value;
		}
		if(el.lastVal != el.value) {
			console.log(el.value, el.id);
			setValues('/pin/value?'+ el.id + '=' + el.value);
			el.lastVal = el.value;
		}
	}
	
	function param(el) {
		console.log(el.value, el.id);
		setValues('/pin/value?'+ el.id + '=' + 1);
	}
		
	function handleToggleButton(el) {
		if(el.value == "ON") {
		  el.value = "OFF";
		  el.className = "btn btn--m btn--green";
		} else {
		  el.value = "ON";
		  el.className = "btn btn--m btn--red";
		}
		//console.log(el.value, el.id);
		//setValues('/pin/value?'+ parent + '=' + el.value);
		setVal(el);
	}
	
	function spot(position, dead_zone) {
		var uri = '/pin/value';
		uri += '?position=' + position;
		uri += '&dead_zone=' + dead_zone;
		setValues(uri);
	}

	window.onload = function ()
	{
		load("style.css","css", function()
		{
			load("microajax.js","js", function()
			{
				setValues("/pin/value");
			});
		});
	}

	function load(e, t, n) {
		if ("js" == t) {
			var a = document.createElement("script");
			a.src = e, a.type = "text/javascript",
			a.async = !1,
			a.onload = function () {
				n()
			},
			document.getElementsByTagName("head")[0].appendChild(a)
		} else if ("css" == t) {
			var a = document.createElement("link");
			a.href = e, a.rel = "stylesheet", a.type = "text/css",
			a.async = !1,
			a.onload = function () {
				n()
			},
			document.getElementsByTagName("head")[0].appendChild(a)
		}
	}

	</script>
